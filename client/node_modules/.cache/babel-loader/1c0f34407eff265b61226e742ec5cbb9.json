{"ast":null,"code":"var _jsxFileName = \"/Users/i537493/Documents/covid19-datavis/client/src/components/ManageData.js\";\nimport React from 'react';\nimport BubbleChartDb from './BubbleChartDb';\nexport default class ManageData extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = prop => event => {\n      this.setState({\n        [prop]: event.target.value\n      });\n    };\n\n    this.state = {\n      loading: true,\n      apiLink: '',\n      apiJson: '',\n      dbName: '',\n      deleteDb: false,\n      refreshChart: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleDeleteSubmit = this.handleDeleteSubmit.bind(this);\n    this.handleCountrySubmit = this.handleCountrySubmit.bind(this);\n    this.handleRefresh = this.handleRefresh.bind(this);\n  }\n\n  // pull data from API at [url], set to json, update state apiJson\n  async apiToJson(url) {\n    const response = await fetch(url);\n    const data = await response.json();\n    console.log('GET API data: success');\n    this.setState({\n      loading: false,\n      apiJson: data\n    });\n  }\n\n  async handleSubmit(event) {\n    // console.log('handleSubmit for: ' + this.state.dbName);\n    event.preventDefault();\n    let url = this.state.apiLink;\n    await this.apiToJson(url);\n    await fetch(\"http://localhost:9000/testDB\", {\n      method: 'POST',\n      body: JSON.stringify({\n        dbName: this.state.dbName,\n        json: this.state.apiJson\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (response) {\n      console.log('(init) POST to NodeJS endpoint: success');\n      return response.json();\n    }).then(json => {\n      // json (queried from MongoDB) has all the data from the api just submitted\n      // this.setState({dataJson: json});\n      // console.log(this.state.dataJson);\n      console.log(typeof json);\n      this.props.setJson(json); // console.log(json);\n\n      return json;\n    }).catch(function (err) {\n      console.log('Failed to send form data to Node: \\n' + err);\n    });\n    alert('Creating a database with the following submission: \\n\\nAPI link: ' + url + '\\nDB name: ' + this.state.dbName);\n  }\n\n  async handleRefresh(event) {\n    event.preventDefault();\n    await this.setState({\n      refreshChart: true\n    });\n    console.log('handle refresh');\n    let url = \"http://localhost:9000/testDB?refreshchart=\" + this.state.refreshChart;\n    await fetch(url).then(function (response) {\n      return response.json();\n    }).then(json => {\n      // let json = JSON.parse(res);\n      // console.log(json.msg);\n      console.log(JSON.stringify(json));\n      this.props.setJson(json);\n    }).catch(err => err);\n  }\n\n  async handleDeleteSubmit(event) {\n    // console.log('handleDelete for: ' + this.state.dbName);\n    event.preventDefault();\n    await this.setState({\n      deleteDb: true\n    });\n    let url = \"http://localhost:9000/testDB?delete=\" + this.state.deleteDb;\n    await fetch(url, {\n      method: 'POST',\n      body: JSON.stringify({\n        dbName: this.state.dbName\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (response) {\n      console.log('(del) POST to NodeJS endpoint: success');\n      return response.text();\n    }).then(string => {\n      console.log(\"response string:\");\n      console.log(string); // nothing: issue in testDB\n    }).catch(function (err) {\n      console.log('Failed to delete DB: \\n' + err);\n    });\n    alert('The following database will be deleted: ' + this.state.dbName);\n  }\n\n  async handleCountrySubmit(event) {\n    console.log('handleCountry for: ' + this.state.dbName);\n    event.preventDefault();\n    let url = \"http://localhost:9000/testDB?country=\" + this.state.country;\n    await fetch(url, {\n      method: 'POST',\n      body: JSON.stringify({\n        dbName: this.state.dbName\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (response) {\n      console.log('(country) POST to NodeJS endpoint: success');\n      console.log(response);\n      return response;\n    }).catch(function (err) {\n      console.log('Failed retrieve country data: \\n' + err);\n    });\n    alert('Retrieving data from: ' + this.state.dbName + ' on ' + this.state.country);\n  }\n\n  componentDidMount() {\n    console.log(\"manageData mount called\");\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      style: {\n        margin: 30\n      },\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      style: {\n        margin: 15\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }\n    }, \"DB Name: \\xA0\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"dbName\",\n      value: this.state.dbName,\n      onChange: this.handleChange('dbName'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      style: {\n        margin: 15\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 21\n      }\n    }, \"API Link: \\xA0\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"apiLink\",\n      value: this.state.apiLink,\n      onChange: this.handleChange('apiLink'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      name: \"initDB\",\n      value: \"Initialize Database\",\n      style: {\n        margin: 15\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleDeleteSubmit,\n      style: {\n        margin: 15\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 21\n      }\n    }, \"Delete Database\"), /*#__PURE__*/React.createElement(\"label\", {\n      style: {\n        margin: 15\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }\n    }, \"Country: \\xA0\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"apiLink\",\n      value: this.state.country,\n      onChange: this.handleChange('country'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleCountrySubmit,\n      style: {\n        margin: 15\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }\n    }, \"Search\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleRefresh,\n      style: {\n        margin: 15\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 21\n      }\n    }, \"Refresh\")));\n  }\n\n}","map":{"version":3,"sources":["/Users/i537493/Documents/covid19-datavis/client/src/components/ManageData.js"],"names":["React","BubbleChartDb","ManageData","Component","constructor","props","handleChange","prop","event","setState","target","value","state","loading","apiLink","apiJson","dbName","deleteDb","refreshChart","bind","handleSubmit","handleDeleteSubmit","handleCountrySubmit","handleRefresh","apiToJson","url","response","fetch","data","json","console","log","preventDefault","method","body","JSON","stringify","headers","then","setJson","catch","err","alert","text","string","country","componentDidMount","render","margin"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AAEA,eAAe,MAAMC,UAAN,SAAyBF,KAAK,CAACG,SAA/B,CAAyC;AACpDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAkBnBC,YAlBmB,GAkBJC,IAAI,IAAKC,KAAD,IAAW;AAC9B,WAAKC,QAAL,CAAc;AAAC,SAACF,IAAD,GAAQC,KAAK,CAACE,MAAN,CAAaC;AAAtB,OAAd;AACH,KApBkB;;AAEf,SAAKC,KAAL,GAAa;AACTC,MAAAA,OAAO,EAAE,IADA;AAETC,MAAAA,OAAO,EAAE,EAFA;AAGTC,MAAAA,OAAO,EAAE,EAHA;AAITC,MAAAA,MAAM,EAAE,EAJC;AAKTC,MAAAA,QAAQ,EAAE,KALD;AAMTC,MAAAA,YAAY,EAAE;AANL,KAAb;AASA,SAAKZ,YAAL,GAAoB,KAAKA,YAAL,CAAkBa,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKE,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBF,IAAxB,CAA6B,IAA7B,CAA1B;AACA,SAAKG,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBH,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKI,aAAL,GAAqB,KAAKA,aAAL,CAAmBJ,IAAnB,CAAwB,IAAxB,CAArB;AACH;;AAMD;AACA,QAAMK,SAAN,CAAiBC,GAAjB,EAAsB;AAElB,UAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAD,CAA5B;AACA,UAAMG,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAAnB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACA,SAAKtB,QAAL,CAAc;AAACI,MAAAA,OAAO,EAAE,KAAV;AAAiBE,MAAAA,OAAO,EAAEa;AAA1B,KAAd;AACH;;AAED,QAAMR,YAAN,CAAmBZ,KAAnB,EAA0B;AACtB;AACAA,IAAAA,KAAK,CAACwB,cAAN;AACA,QAAIP,GAAG,GAAG,KAAKb,KAAL,CAAWE,OAArB;AACA,UAAM,KAAKU,SAAL,CAAeC,GAAf,CAAN;AACA,UAAME,KAAK,CAAC,8BAAD,EAAiC;AACxCM,MAAAA,MAAM,EAAE,MADgC;AAExCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBpB,QAAAA,MAAM,EAAE,KAAKJ,KAAL,CAAWI,MADF;AAEjBa,QAAAA,IAAI,EAAE,KAAKjB,KAAL,CAAWG;AAFA,OAAf,CAFkC;AAMxCsB,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB;AAN+B,KAAjC,CAAL,CAQHC,IARG,CAQE,UAASZ,QAAT,EAAkB;AACtBI,MAAAA,OAAO,CAACC,GAAR,CAAY,yCAAZ;AACA,aAAOL,QAAQ,CAACG,IAAT,EAAP;AACD,KAXG,EAWDS,IAXC,CAWIT,IAAI,IAAI;AACd;AACA;AACA;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAOF,IAAnB;AACA,WAAKxB,KAAL,CAAWkC,OAAX,CAAmBV,IAAnB,EALc,CAMd;;AACA,aAAOA,IAAP;AACD,KAnBG,EAmBDW,KAnBC,CAmBK,UAASC,GAAT,EAAa;AAClBX,MAAAA,OAAO,CAACC,GAAR,CAAY,yCAAuCU,GAAnD;AACH,KArBG,CAAN;AAsBEC,IAAAA,KAAK,CAAC,sEAAsEjB,GAAtE,GAA0E,aAA1E,GAAwF,KAAKb,KAAL,CAAWI,MAApG,CAAL;AACL;;AAED,QAAMO,aAAN,CAAoBf,KAApB,EAA2B;AACvBA,IAAAA,KAAK,CAACwB,cAAN;AACA,UAAM,KAAKvB,QAAL,CAAc;AAACS,MAAAA,YAAY,EAAE;AAAf,KAAd,CAAN;AACAY,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,QAAIN,GAAG,GAAG,+CAA+C,KAAKb,KAAL,CAAWM,YAApE;AACA,UAAMS,KAAK,CAACF,GAAD,CAAL,CACLa,IADK,CACA,UAASZ,QAAT,EAAkB;AACpB,aAAOA,QAAQ,CAACG,IAAT,EAAP;AACH,KAHK,EAGHS,IAHG,CAGET,IAAI,IAAI;AACZ;AACA;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYI,IAAI,CAACC,SAAL,CAAeP,IAAf,CAAZ;AACA,WAAKxB,KAAL,CAAWkC,OAAX,CAAmBV,IAAnB;AACH,KARK,EAQHW,KARG,CAQGC,GAAG,IAAIA,GARV,CAAN;AASH;;AAED,QAAMpB,kBAAN,CAAyBb,KAAzB,EAAgC;AAC5B;AACAA,IAAAA,KAAK,CAACwB,cAAN;AACA,UAAM,KAAKvB,QAAL,CAAc;AAACQ,MAAAA,QAAQ,EAAE;AAAX,KAAd,CAAN;AACA,QAAIQ,GAAG,GAAG,yCAAyC,KAAKb,KAAL,CAAWK,QAA9D;AACA,UAAMU,KAAK,CAACF,GAAD,EAAM;AACbQ,MAAAA,MAAM,EAAE,MADK;AAEbC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBpB,QAAAA,MAAM,EAAE,KAAKJ,KAAL,CAAWI;AADF,OAAf,CAFO;AAKbqB,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB;AALI,KAAN,CAAL,CAMHC,IANG,CAME,UAASZ,QAAT,EAAkB;AACtBI,MAAAA,OAAO,CAACC,GAAR,CAAY,wCAAZ;AACA,aAAOL,QAAQ,CAACiB,IAAT,EAAP;AACH,KATK,EASHL,IATG,CASEM,MAAM,IAAI;AACdd,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYa,MAAZ,EAFc,CAEO;AACxB,KAZK,EAYHJ,KAZG,CAYG,UAASC,GAAT,EAAa;AAChBX,MAAAA,OAAO,CAACC,GAAR,CAAY,4BAA0BU,GAAtC;AACH,KAdG,CAAN;AAeEC,IAAAA,KAAK,CAAC,6CAA2C,KAAK9B,KAAL,CAAWI,MAAvD,CAAL;AAEL;;AAED,QAAMM,mBAAN,CAA0Bd,KAA1B,EAAiC;AAC7BsB,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAwB,KAAKnB,KAAL,CAAWI,MAA/C;AACAR,IAAAA,KAAK,CAACwB,cAAN;AACA,QAAIP,GAAG,GAAG,0CAA0C,KAAKb,KAAL,CAAWiC,OAA/D;AACA,UAAMlB,KAAK,CAACF,GAAD,EAAM;AACbQ,MAAAA,MAAM,EAAE,MADK;AAEbC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBpB,QAAAA,MAAM,EAAE,KAAKJ,KAAL,CAAWI;AADF,OAAf,CAFO;AAKbqB,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB;AALI,KAAN,CAAL,CAOHC,IAPG,CAOE,UAASZ,QAAT,EAAkB;AACtBI,MAAAA,OAAO,CAACC,GAAR,CAAY,4CAAZ;AAEAD,MAAAA,OAAO,CAACC,GAAR,CAAYL,QAAZ;AACA,aAAOA,QAAP;AACD,KAZG,EAYDc,KAZC,CAYK,UAASC,GAAT,EAAa;AAClBX,MAAAA,OAAO,CAACC,GAAR,CAAY,qCAAmCU,GAA/C;AACH,KAdG,CAAN;AAeEC,IAAAA,KAAK,CAAC,2BAAyB,KAAK9B,KAAL,CAAWI,MAApC,GAA2C,MAA3C,GAAkD,KAAKJ,KAAL,CAAWiC,OAA9D,CAAL;AACL;;AAEDC,EAAAA,iBAAiB,GAAE;AACfhB,IAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACH;;AAEDgB,EAAAA,MAAM,GAAE;AACJ,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAM,MAAA,KAAK,EAAE;AAACC,QAAAA,MAAM,EAAE;AAAT,OAAb;AAA2B,MAAA,QAAQ,EAAE,KAAK5B,YAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAO,MAAA,KAAK,EAAE;AAAC4B,QAAAA,MAAM,EAAE;AAAT,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAEI;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,QAAxB;AAAiC,MAAA,KAAK,EAAE,KAAKpC,KAAL,CAAWI,MAAnD;AAA2D,MAAA,QAAQ,EAAE,KAAKV,YAAL,CAAkB,QAAlB,CAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADJ,eAKI;AAAO,MAAA,KAAK,EAAE;AAAC0C,QAAAA,MAAM,EAAE;AAAT,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAEI;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,SAAxB;AAAkC,MAAA,KAAK,EAAE,KAAKpC,KAAL,CAAWE,OAApD;AAA6D,MAAA,QAAQ,EAAE,KAAKR,YAAL,CAAkB,SAAlB,CAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CALJ,eASI;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,IAAI,EAAC,QAA1B;AAAmC,MAAA,KAAK,EAAC,qBAAzC;AAA+D,MAAA,KAAK,EAAE;AAAC0C,QAAAA,MAAM,EAAE;AAAT,OAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATJ,eAUI;AAAQ,MAAA,OAAO,EAAE,KAAK3B,kBAAtB;AAA0C,MAAA,KAAK,EAAE;AAAC2B,QAAAA,MAAM,EAAE;AAAT,OAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAVJ,eAWI;AAAO,MAAA,KAAK,EAAE;AAACA,QAAAA,MAAM,EAAE;AAAT,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAEI;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,SAAxB;AAAkC,MAAA,KAAK,EAAE,KAAKpC,KAAL,CAAWiC,OAApD;AAA6D,MAAA,QAAQ,EAAE,KAAKvC,YAAL,CAAkB,SAAlB,CAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CAXJ,eAeI;AAAQ,MAAA,OAAO,EAAE,KAAKgB,mBAAtB;AAA2C,MAAA,KAAK,EAAE;AAAC0B,QAAAA,MAAM,EAAE;AAAT,OAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAfJ,eAgBI;AAAQ,MAAA,OAAO,EAAE,KAAKzB,aAAtB;AAAqC,MAAA,KAAK,EAAE;AAACyB,QAAAA,MAAM,EAAE;AAAT,OAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAhBJ,CADJ,CADJ;AAuBH;;AAxJmD","sourcesContent":["import React from 'react';\nimport BubbleChartDb from './BubbleChartDb';\n\nexport default class ManageData extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: true,\n            apiLink: '',\n            apiJson: '',\n            dbName: '',\n            deleteDb: false,\n            refreshChart: false\n        };\n    \n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleDeleteSubmit = this.handleDeleteSubmit.bind(this);\n        this.handleCountrySubmit = this.handleCountrySubmit.bind(this);\n        this.handleRefresh = this.handleRefresh.bind(this);\n    }\n\n    handleChange = prop => (event) => {\n        this.setState({[prop]: event.target.value});\n    }\n    \n    // pull data from API at [url], set to json, update state apiJson\n    async apiToJson (url) {\n \n        const response = await fetch(url);\n        const data = await response.json();\n        console.log('GET API data: success')\n        this.setState({loading: false, apiJson: data});\n    }\n\n    async handleSubmit(event) {\n        // console.log('handleSubmit for: ' + this.state.dbName);\n        event.preventDefault();\n        let url = this.state.apiLink;\n        await this.apiToJson(url);\n        await fetch(\"http://localhost:9000/testDB\", {\n            method: 'POST',\n            body: JSON.stringify({\n                dbName: this.state.dbName,\n                json: this.state.apiJson,\n            }),\n            headers: {\"Content-Type\": \"application/json\"}\n          })\n          .then(function(response){\n            console.log('(init) POST to NodeJS endpoint: success')\n            return response.json();\n          }).then(json => {\n            // json (queried from MongoDB) has all the data from the api just submitted\n            // this.setState({dataJson: json});\n            // console.log(this.state.dataJson);\n            console.log(typeof(json));\n            this.props.setJson(json);\n            // console.log(json);\n            return json;\n          }).catch(function(err){\n              console.log('Failed to send form data to Node: \\n'+err);\n          });\n          alert('Creating a database with the following submission: \\n\\nAPI link: ' + url+'\\nDB name: '+this.state.dbName);\n    }\n\n    async handleRefresh(event) {\n        event.preventDefault();\n        await this.setState({refreshChart: true});\n        console.log('handle refresh');\n        let url = \"http://localhost:9000/testDB?refreshchart=\" + this.state.refreshChart;\n        await fetch(url)\n        .then(function(response){\n            return response.json();\n        }).then(json => {\n            // let json = JSON.parse(res);\n            // console.log(json.msg);\n            console.log(JSON.stringify(json));\n            this.props.setJson(json);\n        }).catch(err => err);\n    }\n\n    async handleDeleteSubmit(event) {\n        // console.log('handleDelete for: ' + this.state.dbName);\n        event.preventDefault();\n        await this.setState({deleteDb: true});\n        let url = \"http://localhost:9000/testDB?delete=\" + this.state.deleteDb;\n        await fetch(url, {\n            method: 'POST',\n            body: JSON.stringify({\n                dbName: this.state.dbName,\n            }),\n            headers: {\"Content-Type\": \"application/json\"}\n        }).then(function(response){\n            console.log('(del) POST to NodeJS endpoint: success')\n            return response.text();\n        }).then(string => {\n            console.log(\"response string:\");\n            console.log(string); // nothing: issue in testDB\n        }).catch(function(err){\n              console.log('Failed to delete DB: \\n'+err);\n          });\n          alert('The following database will be deleted: '+this.state.dbName);\n        \n    }\n\n    async handleCountrySubmit(event) {\n        console.log('handleCountry for: ' + this.state.dbName);\n        event.preventDefault();\n        let url = \"http://localhost:9000/testDB?country=\" + this.state.country;\n        await fetch(url, {\n            method: 'POST',\n            body: JSON.stringify({\n                dbName: this.state.dbName,\n            }),\n            headers: {\"Content-Type\": \"application/json\"}\n          })\n          .then(function(response){\n            console.log('(country) POST to NodeJS endpoint: success')\n\n            console.log(response);\n            return response;\n          }).catch(function(err){\n              console.log('Failed retrieve country data: \\n'+err);\n          });\n          alert('Retrieving data from: '+this.state.dbName+' on '+this.state.country);\n    }\n\n    componentDidMount(){\n        console.log(\"manageData mount called\")\n    }\n\n    render(){\n        return (\n            <div>\n                <form style={{margin: 30}} onSubmit={this.handleSubmit}>\n                    <label style={{margin: 15}}>\n                        DB Name: &nbsp;\n                        <input type=\"text\" name=\"dbName\" value={this.state.dbName} onChange={this.handleChange('dbName')}/>\n                    </label>\n                    <label style={{margin: 15}}>\n                        API Link: &nbsp;\n                        <input type=\"text\" name=\"apiLink\" value={this.state.apiLink} onChange={this.handleChange('apiLink')}/>\n                    </label>\n                    <input type=\"submit\" name=\"initDB\" value=\"Initialize Database\" style={{margin: 15}}/>\n                    <button onClick={this.handleDeleteSubmit} style={{margin: 15}}>Delete Database</button>\n                    <label style={{margin: 15}}>\n                        Country: &nbsp;\n                        <input type=\"text\" name=\"apiLink\" value={this.state.country} onChange={this.handleChange('country')}/>\n                    </label>\n                    <button onClick={this.handleCountrySubmit} style={{margin: 15}}>Search</button>\n                    <button onClick={this.handleRefresh} style={{margin: 15}}>Refresh</button>\n                </form>\n                {/* <BubbleChartDb/> */}\n            </div> \n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}